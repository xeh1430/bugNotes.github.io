<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="路漫漫其修远兮！"><title>Web Service 入门 | xeh的学习笔记</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Web Service 入门</h1><a id="logo" href="/.">xeh的学习笔记</a><p class="description">将记录当成一种习惯</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Web Service 入门</h1><div class="post-meta">Nov 26, 2018<span> | </span><span class="category"><a href="/categories/Web-Service/">Web Service</a></span><span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><span class="post-count"> 842</span><span class="post-meta-item-text"> 字</span></span></span><span class="post-time"> | <span class="post-meta-item-icon"><i class="fa fa-hourglass-half"></i><span class="post-count"> 3</span><span class="post-meta-item-text"> 分钟</span></span></span></div><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Web-Service简介"><span class="toc-number">1.</span> <span class="toc-text">Web Service简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#WebService-的原理"><span class="toc-number">2.</span> <span class="toc-text">WebService 的原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JAVA-WebService规范"><span class="toc-number">3.</span> <span class="toc-text">JAVA WebService规范</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Web-Service服务端开发"><span class="toc-number">4.</span> <span class="toc-text">Web Service服务端开发</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Web-Service客户端实现"><span class="toc-number">5.</span> <span class="toc-text">Web Service客户端实现</span></a></li></ol></div></div><div class="post-content"><h2 id="Web-Service简介"><a href="#Web-Service简介" class="headerlink" title="Web Service简介"></a>Web Service简介</h2><p>Web Service技术，能使得运行在不同机器上的不同应用无须借助附加的、专门的第三方软件或硬件，就可相互交换数据或集成。依据Web Service规范实施的应用之间，无论它们所使用的语言、平台或内部协议是什么，都可以相互交换数据。<br>WebService是一种跨编程语言和跨操作系统平台的远程调用技术。</p>
<p>详细信息：<a href="https://baike.baidu.com/item/Web%20Service" target="_blank" rel="noopener">WebService百度百科</a></p>
<h2 id="WebService-的原理"><a href="#WebService-的原理" class="headerlink" title="WebService 的原理"></a>WebService 的原理</h2><p><strong>XML+XSD,SOAP和WSDL就是构成WebService平台的三大技术</strong><br>SOAP协议 = HTTP协议 + XML数据格式  </p>
<p><strong>WebService开发可以分为服务器端开发和客户端开发两个方面</strong><br>对客户端而言，我们给这各类WebService客户端API传递wsdl文件的url地址，这些API就会创建出底层的代理类，我调用 这些代理，就可以访问到webservice服务。代理类把客户端的方法调用变成soap格式的请求数据再通过HTTP协议发出去，并把接收到的soap 数据变成返回值返回。<br>对服务端而言，各类WebService框架的本质就是一个大大的Servlet，当远程调用客户端给它通过http协议发送过来 soap格式的请求数据时，它分析这个数据，就知道要调用哪个java类的哪个方法，于是去查找或创建这个对象，并调用其方法，再把方法返回的结果包装成 soap格式的数据，通过http响应消息回给客户端。</p>
<h2 id="JAVA-WebService规范"><a href="#JAVA-WebService规范" class="headerlink" title="JAVA WebService规范"></a>JAVA WebService规范</h2><p>Java 中共有三种WebService 规范，分别是JAXM&amp;SAAJ、JAX-WS（JAX-RPC）、JAX-RS。</p>
<h2 id="Web-Service服务端开发"><a href="#Web-Service服务端开发" class="headerlink" title="Web Service服务端开发"></a>Web Service服务端开发</h2><p>创建一个WebService实例，实现服务端发布，客户端获取信息的功能。<br>使用idea创建springboot项目，配置WebService和web依赖<br><img src="https://xeh1430.github.io/img/webservice-2.jpg" alt="导入依赖包"><br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.编写WebService 接口方法</span><br><span class="line">public<span class="built_in"> interface </span>HelloWebService &#123;</span><br><span class="line">    String sayHello(String name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2.</span>实现接口，作为webservice提供服务类 </span><br><span class="line"><span class="meta">@WebService</span></span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">HelloWebServiceImpl</span> <span class="keyword">implements</span> <span class="title">HelloWebService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    public <span class="built_in">String</span> sayHello(<span class="built_in">String</span> name) &#123;</span><br><span class="line">        <span class="built_in">String</span> said = name + <span class="string">",Hello~~"</span>;</span><br><span class="line">        System.out.println(said);</span><br><span class="line">        <span class="keyword">return</span> said;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3.</span>发布服务</span><br><span class="line">@SpringBootApplication</span><br><span class="line"><span class="keyword">public</span> class App &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(<span class="keyword">String</span>[] args) &#123;</span><br><span class="line">        SpringApplication.<span class="built_in">run</span>(App.class, args);</span><br><span class="line">         <span class="comment">/*</span></span><br><span class="line"><span class="comment">        在服务器端运行WebServicePublish类中的main方法，控制台打印出发布webservice成功！</span></span><br><span class="line"><span class="comment">        在浏览器中输入我们在WebServicePublish类中定义的url?wsdl(注意一定要加wsdl),浏览器显示一个xml文档</span></span><br><span class="line"><span class="comment">        那么我们这个WebService就发布成功了。</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">//定义webService的发布地址，提供给外界使用接口的地址</span></span><br><span class="line">        <span class="keyword">String</span> url = <span class="string">"http://localhost:8081/WebService"</span>;</span><br><span class="line">        Endpoint.publish(url,<span class="keyword">new</span> HelloWebServiceImpl());</span><br><span class="line">        System.out.<span class="built_in">println</span>(<span class="string">"发布webService成功！"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">4</span>.浏览器输入 `http://localhost:<span class="number">8081</span>/WebService?wsdl` 测试服务是否发布成功</span><br></pre></td></tr></table></figure>
<p><img src="https://xeh1430.github.io/img/webservice-wsdl.jpg" alt="wsdl"></p>
<h2 id="Web-Service客户端实现"><a href="#Web-Service客户端实现" class="headerlink" title="Web Service客户端实现"></a>Web Service客户端实现</h2><p>访问<code>http://localhost:8081/WebService?wsdl</code>，将文档下载保存为wsdl格式<br>用idea新建一个java项目，导入wsdl文件，反向生成代码<br>wsdl右键点击–&gt;WebServices–&gt;Generate Java Code From Wsdl–&gt;选择解析规范JAX-WS(idea自带)<br><img src="https://xeh1430.github.io/img/webservice-3.jpg" alt="反向生成代码"></p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">编写客户端</span><br><span class="line"><span class="keyword">public</span> class HelloClient &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(<span class="keyword">String</span>[] args) &#123;</span><br><span class="line">    	<span class="comment">//创建服务视图，视图是从wsdl文件的service标签的name属性获取</span></span><br><span class="line">        HelloWebServiceImplService helloWebServiceImplService = <span class="keyword">new</span> HelloWebServiceImplService();</span><br><span class="line">        <span class="comment">//获取服务实现类，实现类从wsdl文件的portType的name属性获取</span></span><br><span class="line">        HelloWebServiceImpl helloWebService = helloWebServiceImplService.getPort(HelloWebServiceImpl.class);</span><br><span class="line">        <span class="comment">//获取查询方法，从portType的operation标签获取</span></span><br><span class="line">        <span class="keyword">String</span> <span class="built_in">str</span> = helloWebService.sayHello(<span class="string">"小明"</span>);</span><br><span class="line">        System.out.<span class="built_in">println</span>(<span class="built_in">str</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>直接执行，控制台成功输出</p>
</div><div class="tags"></div><div class="post-nav"><a class="next" href="/2018/11/12/Axure/">Axure入门使用</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"/><div id="local-search-result"></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Web-Service/">Web Service</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/spring-boot/">spring boot</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/工具/">工具</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/11/26/Web Service Client/">Web Service 入门</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/12/Axure/">Axure入门使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/12/Spring Boot_Whitelabel Error Page/">Spring Boot:Whitelabel Error Page错误解决</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/02/markdown/">markdown入门</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/16/Hello World/">Hexo 入门</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://news.cnblogs.com/" title="博客园新闻" target="_blank">博客园新闻</a><ul></ul><a href="http://www.ruanyifeng.com/blog/" title="阮一峰的网络日志" target="_blank">阮一峰的网络日志</a><ul></ul><a href="https://gitee.com/explore" title="码云 开源软件" target="_blank">码云 开源软件</a><ul></ul><a href="https://github.com/" title="github" target="_blank">github</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">xeh的学习笔记.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/search.js?v=0.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>